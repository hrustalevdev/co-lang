{"version":3,"file":"Parser.js","names":["CommonTokenStream","antlr4","Parser","coLangLexer","lexer","tokens","parser","T6TriggerParser","buildParseTrees","removeErrorListeners","errorListener","ErrorListener","getInstance","addErrorListener","ast","parse","error","report","clearInstance"],"sources":["../src/Parser.ts"],"sourcesContent":["import antlr4 from 'antlr4';\nimport T6TriggerParser from './gen/T6TriggerParser';\nimport { Lexer } from './Lexer';\nimport { ErrorListener } from './ErrorListener';\nimport { CoLangError } from './CoLangError';\nimport { ParseCtx } from './types';\n\nconst { CommonTokenStream } = antlr4;\n\nexport class Parser {\n  parser: T6TriggerParser;\n  ast: ParseCtx;\n  error?: CoLangError;\n\n  constructor(coLangLexer: Lexer) {\n    const { lexer } = coLangLexer;\n    /** Creating a token stream */\n    const tokens = new CommonTokenStream(lexer);\n\n    /** Pass the token stream to the parser */\n    const parser = new T6TriggerParser(tokens);\n    parser.buildParseTrees = true;\n    parser.removeErrorListeners();\n    const errorListener = ErrorListener.getInstance();\n    parser.addErrorListener(errorListener);\n    this.parser = parser;\n\n    /**\n     * Specify the root node of the AST  (parse tree) - in our case, the top node is - \"parse\". That is, the parser will\n     * start traversing the parse tree, starting with this rule\n     */\n    this.ast = parser.parse();\n    this.error = errorListener.report;\n    ErrorListener.clearInstance();\n  }\n}\n"],"mappings":";;;;;;;AAAA;AACA;AAEA;AAAgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAIhD,IAAQA,iBAAiB,GAAKC,cAAM,CAA5BD,iBAAiB;AAAY,IAExBE,MAAM,6BAKjB,gBAAYC,WAAkB,EAAE;EAAA;EAC9B,IAAQC,KAAK,GAAKD,WAAW,CAArBC,KAAK;EACb;EACA,IAAMC,MAAM,GAAG,IAAIL,iBAAiB,CAACI,KAAK,CAAC;;EAE3C;EACA,IAAME,MAAM,GAAG,IAAIC,wBAAe,CAACF,MAAM,CAAC;EAC1CC,MAAM,CAACE,eAAe,GAAG,IAAI;EAC7BF,MAAM,CAACG,oBAAoB,EAAE;EAC7B,IAAMC,aAAa,GAAGC,4BAAa,CAACC,WAAW,EAAE;EACjDN,MAAM,CAACO,gBAAgB,CAACH,aAAa,CAAC;EACtC,IAAI,CAACJ,MAAM,GAAGA,MAAM;;EAEpB;AACJ;AACA;AACA;EACI,IAAI,CAACQ,GAAG,GAAGR,MAAM,CAACS,KAAK,EAAE;EACzB,IAAI,CAACC,KAAK,GAAGN,aAAa,CAACO,MAAM;EACjCN,4BAAa,CAACO,aAAa,EAAE;AAC/B,CAAC;AAAA"}