{"version":3,"file":"FormatConditionVisitor.js","names":["FormatConditionVisitor","spaces","indent","repeat","exprLvl","ctx","inputStream","start","source","Error","getText","stop","formattedCondition","expr","trim","e","eIndent","getExprIndent","leftExpr","rightExpr","op","binary","OR","AND","IF","comparator","FROM","field","THEN","ANY","EMPTY","number","numbers","NOT","not","LPAREN","numOrVal","values","value","map","vCtx","getConditionValue","RPAREN","COMPLEX","complex","COUNT","count","distOrVal","DISTINCT","COUNT_COMPLEX","countComplex","complexField","leIndent","reIndent","vehicleImpact","T6TriggerVisitor"],"sources":["../src/FormatConditionVisitor.ts"],"sourcesContent":["import T6TriggerVisitor from './gen/T6TriggerVisitor';\nimport {\n  AnyExprCtx,\n  BinaryExprCtx,\n  ComparatorExprCtx,\n  ComplexExprCtx,\n  CountComplexExprCtx,\n  CountExprCtx,\n  EmptyExprCtx,\n  NotExprCtx,\n  NumberExprCtx,\n  NumbersExprCtx,\n  ParenExprCtx,\n  ParseCtx,\n  ValueCtx,\n  ValueExprCtx,\n  ValuesExprCtx,\n  VehicleImpactExprCtx\n} from './types';\n\nexport class FormatConditionVisitor extends T6TriggerVisitor {\n  private readonly indent;\n  private exprLvl = 0;\n\n  formattedCondition = '';\n\n  constructor(spaces: number = 2) {\n    super();\n    this.indent = '\\u0020'.repeat(spaces);\n  }\n\n  private getExprIndent() {\n    return this.exprLvl ? this.indent.repeat(this.exprLvl) : '';\n  }\n\n  private getConditionValue(ctx: ValueCtx) {\n    const inputStream = ctx.start.source[1];\n    if (!inputStream) throw new Error('InputStream is missing in TokenSourceTuple');\n\n    return inputStream.getText(ctx.start.start, ctx.stop.stop);\n  }\n\n  override visitParse(ctx: ParseCtx) {\n    try {\n      this.formattedCondition = (super.visit(ctx.expr()) as string).trim();\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  override visitBinaryExpr(ctx: BinaryExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const leftExpr = super.visit(ctx.expr(0)) as string;\n    const rightExpr = super.visit(ctx.expr(1)) as string;\n    const op = !!ctx.binary().OR() ? ctx.binary().OR().getText() : ctx.binary().AND().getText();\n\n    return `${leftExpr}${eIndent}${op}\\n${rightExpr}`;\n  }\n\n  override visitComparatorExpr(ctx: ComparatorExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const comparator = ctx.comparator().getText();\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    return `${eIndent}${IF} ${comparator} ${FROM} ${field} ${THEN}\\n`;\n  }\n\n  override visitAnyExpr(ctx: AnyExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const ANY = ctx.ANY().getText();\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    return `${eIndent}${IF} ${ANY} ${FROM} ${field} ${THEN}\\n`;\n  }\n\n  override visitEmptyExpr(ctx: EmptyExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const EMPTY = ctx.EMPTY().getText();\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    return `${eIndent}${IF} ${EMPTY} ${FROM} ${field} ${THEN}\\n`;\n  }\n\n  override visitNumberExpr(ctx: NumberExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const number = ctx.number().getText();\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    return `${eIndent}${IF} ${number} ${FROM} ${field} ${THEN}\\n`;\n  }\n\n  override visitNumbersExpr(ctx: NumbersExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const numbers = ctx.numbers().getText();\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    return `${eIndent}${IF} ${numbers} ${FROM} ${field} ${THEN}\\n`;\n  }\n\n  override visitNotExpr(ctx: NotExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const NOT = ctx.not().NOT().getText();\n    const LPAREN = ctx.not().LPAREN().getText();\n    const numOrVal = ctx.not().numbers()\n      ? ctx.not().numbers().getText()\n      : ctx.not()\n        .values().value()\n        .map((vCtx) => this.getConditionValue(vCtx));\n    const RPAREN = ctx.not().RPAREN().getText();\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    return `${eIndent}${IF} ${NOT}${LPAREN}${numOrVal}${RPAREN} ${FROM} ${field} ${THEN}\\n`;\n  }\n\n  override visitComplexExpr(ctx: ComplexExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const COMPLEX = ctx.complex().COMPLEX().getText();\n    const LPAREN = ctx.complex().LPAREN().getText();\n    this.exprLvl++;\n    const expr = super.visit(ctx.complex().expr()) as string\n    this.exprLvl--;\n    const RPAREN = ctx.complex().RPAREN().getText();\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    return `${eIndent}${IF} ${COMPLEX}${LPAREN}\\n${expr}${eIndent}${RPAREN} ${FROM} ${field} ${THEN}\\n`;\n  }\n\n  override visitCountExpr(ctx: CountExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const COUNT = ctx.count().COUNT().getText();\n    const LPAREN = ctx.count().LPAREN().getText();\n    const distOrVal = ctx.count().DISTINCT()\n      ? ctx.count().DISTINCT().getText()\n      : this.getConditionValue(ctx.count().value());\n    const RPAREN = ctx.count().RPAREN().getText();\n    const comparator = ctx.count().comparator().getText();\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    return `${eIndent}${IF} ${COUNT}${LPAREN}${distOrVal}${RPAREN}${comparator} ${FROM} ${field} ${THEN}\\n`;\n  }\n\n  override visitCountComplexExpr(ctx: CountComplexExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const COUNT_COMPLEX = ctx.countComplex().COUNT_COMPLEX().getText();\n    const LPAREN = ctx.countComplex().LPAREN().getText();\n    this.exprLvl++;\n    const expr = super.visit(ctx.countComplex().expr()) as string;\n    this.exprLvl--;\n    const RPAREN = ctx.countComplex().RPAREN().getText();\n    const comparator = ctx.countComplex().comparator().getText();\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    if (ctx.countComplex().DISTINCT()) {\n      const DISTINCT = ctx.countComplex().DISTINCT().getText();\n      const complexField = ctx.countComplex().field().getText();\n\n      return `${eIndent}${IF} ${COUNT_COMPLEX}${LPAREN}\\n${eIndent}${this.indent}${DISTINCT} ${complexField}\\n${expr}${eIndent}${RPAREN}${comparator} ${FROM} ${field} ${THEN}\\n`;\n    }\n\n    return `${eIndent}${IF} ${COUNT_COMPLEX}${LPAREN}\\n${expr}${eIndent}${RPAREN}${comparator} ${FROM} ${field} ${THEN}\\n`;\n  }\n\n  override visitParenExpr(ctx: ParenExprCtx) {\n    const LPAREN = ctx.LPAREN().getText();\n    const leIndent = this.getExprIndent();\n    this.exprLvl++;\n    const expr = super.visit(ctx.expr()) as string;\n    this.exprLvl--;\n    const reIndent = this.getExprIndent();\n    const RPAREN = ctx.RPAREN().getText();\n\n    return `${leIndent}${LPAREN}\\n${expr}${reIndent}${RPAREN}\\n`\n  }\n\n  override visitVehicleImpactExpr(ctx: VehicleImpactExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const vehicleImpact = ctx.vehicleImpact().getText();\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    return `${eIndent}${IF} ${vehicleImpact} ${FROM} ${field} ${THEN}\\n`;\n  }\n\n  override visitValueExpr(ctx: ValueExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const value = this.getConditionValue(ctx.value());\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    return `${eIndent}${IF} ${value} ${FROM} ${field} ${THEN}\\n`;\n  }\n\n  override visitValuesExpr(ctx: ValuesExprCtx) {\n    const eIndent = this.getExprIndent();\n\n    const IF = ctx.IF().getText();\n    const values = ctx\n      .values()\n      .value()\n      .map((vCtx) => this.getConditionValue(vCtx));\n    const FROM = ctx.FROM().getText();\n    const field = ctx.field().getText();\n    const THEN = ctx.THEN().getText();\n\n    return `${eIndent}${IF} ${values} ${FROM} ${field} ${THEN}\\n`;\n  }\n}\n"],"mappings":"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"}